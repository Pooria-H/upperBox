!function(e){e.fn.upperbox=function(t){function n(){"fade"==a.animate?e(o).fadeOut(200):"slide"==a.animate&&e(o).slideUp(200),1==a.destroyElem&&setTimeout(function(){e(o).remove()},200)}var i={elem:'<div class="upperbox" style="display:none"><div class="upperbox-wrapper"><div class="head"><button type="button" class="close"><i></i><i></i></button></div><div class="content"> </div></div></div>',content:"Content...",position:"relative",animate:"slide",class:"",destroyElem:!0,templateID:null},a=e.extend(i,t);if(null==a.templateID)var o=e.parseHTML(a.elem);else var s=a.templateID,d=e("#"+s).html(),o=e.parseHTML(d);if(e(o).addClass(a.position+" "+a.animate+" "+a.class),e(o).find(".content").html(a.content),e(this).append(o),"tower"==a.position)if(0==e(this).find(".upperbox-towerWrapper").length){var l=document.createElement("div");e(l).addClass("upperbox-towerWrapper").html(o),e(this).append(l)}else{var l=e(this).find(".upperbox-towerWrapper");e(l).append(o)}return setTimeout(function(){"fade"==a.animate?e(o).fadeIn(200):"slide"==a.animate&&e(o).slideDown(200)},50),e(o).find(".close").click(function(){n()}),e(document).ready(function(){e(document).keyup(function(e){27==e.keyCode&&n()})}),this}}(jQuery);